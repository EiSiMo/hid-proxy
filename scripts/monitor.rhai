fn process(direction, data) {
    print(`${data.len()} bytes [${direction}]: ${data}`);
    return data;
}